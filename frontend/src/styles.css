/* Threat-Intel Modern Dark Theme */
:root {
  --metal-a: #0d1424;
  --metal-b: #172339;
  --metal-accent-edge: #2a3f5c;
  --metal-highlight: #4a6fa0;
  --bg: var(--metal-a);
  --bg-alt: #16273b;
  --bg-elevated: var(--metal-b);
  --bg-glass: rgba(255,255,255,0.08);
  /* Semantic surface tokens */
  --surface-1: var(--bg-elevated);
  --surface-2: rgba(255,255,255,0.04);
  --surface-3: rgba(255,255,255,0.07);
  --border: #273e58;
  --border-strong: #3c5878;
  --text: #f0f6fb;
  --text-dim: #94abc1;
  --accent: #5d7bff;
  --accent-accent: #38e8d2;
  --danger: #ef4444;
  --ok: #18c978;
  --warn: #ffb347;
  --focus: #5d7bff;
  --radius-xs:4px; --radius-sm:8px; --radius:16px;
  --shadow-sm: 0 1px 2px -1px rgba(0,0,0,.55), 0 2px 4px -1px rgba(0,0,0,.45);
  --shadow: 0 6px 26px -10px rgba(0,0,0,.7), 0 3px 10px -2px rgba(0,0,0,.55);
  --trans-fast: 140ms cubic-bezier(.4,.0,.2,1);
  --font-stack: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen;
  --mono: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, monospace;
  --gradient-accent: linear-gradient(125deg,#5d7bff 0%,#7f63ff 32%,#c14fff 64%,#38e8d2 100%);
  --gradient-metal: linear-gradient(145deg,#142238 0%,#0d1626 38%,#142238 72%,#08101c 100%);
  --canvas-gradient: radial-gradient(circle at 20% 18%, rgba(93,123,255,0.28) 0%, rgba(93,123,255,0.08) 32%, rgba(56,232,210,0.06) 50%, rgba(0,0,0,0) 72%),
                     linear-gradient(155deg,#0b1320 0%, #0e1c30 45%, #0a1626 100%);
  --card-accent-fade: linear-gradient(150deg,rgba(93,123,255,0.12) 0%,rgba(56,232,210,0.09) 65%,rgba(0,0,0,0) 100%);
  --card-glow-fade: radial-gradient(circle at 18% 8%, rgba(193,79,255,0.18), rgba(0,0,0,0) 55%);
  --space-1:4px; --space-2:8px; --space-3:12px; --space-4:16px; --space-6:24px;
  --focus-ring: 0 0 0 3px rgba(93,123,255,.35);
  --noise: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='60' height='60' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
}
html.light {
  --bg: #f5f7fb;
  --bg-alt: #ffffff;
  --bg-elevated: #ffffff;
  --bg-glass: rgba(0,0,0,0.04);
  --surface-1: var(--bg-elevated);
  --surface-2: #f1f5f9;
  --surface-3: #e2e8f0;
  --border: #d8e0ea;
  --border-strong: #c5d0dc;
  --text: #1d2733;
  --text-dim: #637284;
  --accent: #2563eb;
  --accent-accent: #1d4ed8;
  --danger: #dc2626;
  --ok: #15803d;
  --warn: #d97706;
  --focus: #2563eb;
  --gradient-accent: linear-gradient(135deg,#2563eb 0%,#7c3aed 60%,#ec4899 100%);
  background:#eef2f7;
  color: var(--text);
}

html.light body { background: radial-gradient(circle at 20% 20%, #ffffff 0%, #e2e8f0 60%); color: var(--text); }
html.light .card { box-shadow: 0 1px 2px rgba(0,0,0,.06), 0 4px 18px -4px rgba(0,0,0,.08); }
html.light .sidebar { background: linear-gradient(180deg,#ffffff 0%, #f1f5f9 100%); }
html.light .nav-button { color: var(--text-dim); }
html.light .nav-button.active { background:linear-gradient(90deg,#e2e8f0,#dbe4ee); box-shadow: inset 0 0 0 1px #cfd9e4; }
html.light .tech-item { background:#f1f5f9; }
html.light .terminal { background:#f8fafc; color:#1e293b; }
html.light pre { background:#f1f5f9; }
html.light .tile { background:#ffffff; border-color:#d8e0ea; box-shadow:inset 0 0 0 1px #e2e8f0; }
html.light .tech-item { border-color:#d5dde6; }
html.light .tech-item:hover { background:#e8eff6; border-color:#c9d4df; }
html.light .tech-item.selected { background:#d9e4ef; border-color:#b7c6d4; box-shadow: inset 0 0 0 1px #b7c6d4; }
html.light .terminal { border-color:#d7dfe8; box-shadow: inset 0 0 0 1px #e4ebf2; }
html.light pre { border-color:#d8e1ea; }
html.light th { background:#f1f5f9; color:#4b5563; }
html.light td { border-top:1px solid #e2e8f0; }
html.light tr:hover td { background:#eef3f8; }
html.light .inline-badge { background:#e2e8f0; color:#475569; }
html.light .card-glow { background:rgba(0,0,0,0.04); }
html.light .kv > div { background:#f1f5f9; border-color:#d8e0ea; }

* { box-sizing: border-box; }
html, body { height:100%; }
body { margin:0; font-family: var(--font-stack); background: var(--canvas-gradient), var(--gradient-metal); background-blend-mode: overlay, normal; color: var(--text); -webkit-font-smoothing: antialiased; position:relative; }
body::before { content:""; position:fixed; inset:0; background: var(--noise); mix-blend-mode: overlay; pointer-events:none; opacity:.25; }

/* Smooth theme transitions respecting reduced-motion */
@media (prefers-reduced-motion: no-preference){
  body, .card, .sidebar, .nav-button, .tile, .terminal, pre, .tech-item { transition: background-color .35s ease, color .35s ease, border-color .35s ease; }
}

#root { height:100vh; display:flex; overflow:hidden; }

/* Sidebar */
.sidebar { width:260px; background: var(--gradient-metal); border-right:1px solid var(--border); display:flex; flex-direction:column; backdrop-filter: blur(14px); position:relative; gap:12px; padding-bottom:12px; }
.sidebar::after { content:""; position:absolute; inset:0; background: linear-gradient(180deg,rgba(255,255,255,.05),transparent 50%,rgba(255,255,255,.03)); mix-blend-mode: overlay; pointer-events:none; }
.brand { display:flex; align-items:center; gap:10px; padding:18px 20px 10px; margin-bottom:4px; }
.brand-logo { width:34px; height:34px; border-radius:10px; background:var(--gradient-accent); display:flex; align-items:center; justify-content:center; font-weight:600; font-size:.85rem; letter-spacing:.5px; box-shadow: var(--shadow-sm); }
.brand h1 { font-size:1.05rem; margin:0; font-weight:600; letter-spacing:.5px; }
.nav { flex:1; overflow:auto; padding:4px 16px 12px; display:flex; flex-direction:column; gap:10px; scroll-padding:12px; }
.nav::-webkit-scrollbar { width:6px; }
.nav::-webkit-scrollbar-thumb { background:#202a37; border-radius:3px; }
.nav-button { width:100%; background:linear-gradient(140deg,rgba(255,255,255,.05),rgba(255,255,255,0) 60%); border:1px solid rgba(255,255,255,.05); color:var(--text-dim); padding:11px 16px; text-align:left; display:flex; align-items:center; gap:12px; cursor:pointer; font-size:.8rem; font-weight:500; letter-spacing:.4px; border-radius: 14px; position:relative; transition: var(--trans-fast), border-color .25s, box-shadow .25s; overflow:hidden; backdrop-filter: blur(4px); }
.nav-button::before { content:""; position:absolute; inset:0; background:linear-gradient(100deg,rgba(255,255,255,.18),rgba(255,255,255,0) 55%); opacity:0; transition: var(--trans-fast); mix-blend-mode:overlay; }
.nav-button::after { content:""; position:absolute; top:-140%; left:-60%; width:160%; height:380%; background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.4), rgba(255,255,255,0) 70%); transform:translateX(-60%) rotate(25deg); opacity:0; transition:800ms cubic-bezier(.4,.0,.2,1); }
.nav-button:hover { color:var(--text); border-color:#3a4956; box-shadow:0 2px 6px -2px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,.05) inset; }
.nav-button:hover::before { opacity:.22; }
.nav-button:hover::after { opacity:.18; transform:translateX(0) rotate(25deg); filter:blur(4px); }
.nav-button.active { background:linear-gradient(155deg,rgba(93,123,255,0.28),rgba(56,232,210,0.18) 60%,rgba(0,0,0,0) 100%), linear-gradient(145deg,#1d2730,#151c23); color:var(--text); box-shadow: inset 0 0 0 1px #3a4956,0 0 0 1px rgba(255,255,255,.05),0 4px 14px -6px rgba(0,0,0,.7); border-color:#3a4956; }
.nav-footer { padding:10px 14px; font-size:.65rem; letter-spacing:.6px; color:var(--text-dim); border-top:1px solid var(--border); }
/* Sidebar section headers */
.nav-section-label { font-size:.66rem; letter-spacing:2.4px; font-weight:700; color:var(--text-dim); text-transform:uppercase; font-family: var(--mono); opacity:.95; padding:10px 4px 6px; margin:8px 0 4px; position:relative; }
.nav-section-label::after { content:""; position:absolute; left:0; right:0; bottom:0; height:1px; background:linear-gradient(90deg,rgba(255,255,255,.08),rgba(255,255,255,0.04) 50%,rgba(255,255,255,0)); opacity:.6; }
html.light .nav-section-label::after { background:linear-gradient(90deg,rgba(0,0,0,.12),rgba(0,0,0,0.06) 50%,rgba(0,0,0,0)); opacity:.5; }

/* Content area */
.content { flex:1; display:flex; flex-direction:column; min-width:0; }
.app-header { display:flex; align-items:center; justify-content:space-between; padding:10px 24px; border-bottom:1px solid var(--border); background:rgba(16,22,32,.6); backdrop-filter: blur(14px); position:sticky; top:0; z-index:10; }
.app-header h2 { font-size:.9rem; font-weight:500; letter-spacing:.5px; margin:0; color:var(--text-dim); }
.status-pill { font-size:.65rem; padding:4px 8px; border-radius:20px; background:#1e2734; color:var(--text-dim); display:inline-flex; gap:6px; align-items:center; }
.status-pill.online { background:#142f20; color:var(--ok); }

main { flex:1; overflow:auto; padding:32px clamp(24px,4vw,56px); display:flex; flex-direction:column; gap:28px; }
main::-webkit-scrollbar { width:10px; }
main::-webkit-scrollbar-thumb { background:#1c2531; border-radius:5px; }

/* Layout helpers */
.center-wrap { width:100%; max-width:1180px; margin:0 auto; display:flex; flex-direction:column; gap:28px; }
.center-wrap.wide { max-width:1600px; }
.flex { display:flex; }
.flex-col { display:flex; flex-direction:column; }
.gap-sm { gap:8px; }
.gap { gap:16px; }
.gap-lg { gap:28px; }
.split { display:flex; gap:24px; }

/* Cards */
.card { background: var(--card-accent-fade), var(--card-glow-fade), linear-gradient(180deg,rgba(255,255,255,.07),rgba(255,255,255,.025) 60%) , var(--surface-1); border:1px solid var(--border); border-radius: var(--radius); padding:22px 24px; box-shadow: var(--shadow-sm); position:relative; overflow:hidden; }
.card::before { content:""; position:absolute; inset:0; background:linear-gradient(160deg,rgba(255,255,255,.10),transparent 50%); opacity:.3; mix-blend-mode:overlay; pointer-events:none; }
.card::after { content:""; position:absolute; top:0; left:0; right:0; height:1px; background:linear-gradient(90deg,transparent,var(--metal-highlight),transparent); opacity:.55; }
.card-glow { background: var(--card-accent-fade), linear-gradient(185deg,rgba(255,255,255,.16),rgba(255,255,255,.05) 55%) , var(--surface-1); backdrop-filter: blur(18px); }
.editor-tabs { display:flex; align-items:stretch; border-bottom:1px solid var(--border); background:linear-gradient(120deg,rgba(255,255,255,.05),rgba(255,255,255,0)); }
.tabs-scroll { display:flex; overflow:auto; scrollbar-width:none; -ms-overflow-style:none; }
.tabs-scroll::-webkit-scrollbar { display:none; }
.editor-tab { display:flex; align-items:center; gap:6px; font-size:.65rem; padding:6px 10px; cursor:pointer; background:rgba(255,255,255,.04); border-right:1px solid var(--border); position:relative; user-select:none; }
.editor-tab.active { background:linear-gradient(140deg,rgba(93,123,255,.3),rgba(56,232,210,.12)); color:var(--text); box-shadow: inset 0 0 0 1px rgba(255,255,255,.05); }
.editor-tab:hover { background:rgba(255,255,255,.07); }
.tab-close { background:none; border:none; color:var(--text-dim); font-size:.8rem; cursor:pointer; padding:0 2px; }
.tab-close:hover { color:var(--text); }
.tab-add { background:rgba(255,255,255,.05); border:1px solid var(--border); color:var(--text-dim); padding:0 8px; cursor:pointer; font-size:.8rem; margin-left:4px; border-radius:6px; }
.tab-add:hover { background:rgba(255,255,255,.08); color:var(--text); }
.editor-toolbar { display:flex; align-items:center; gap:6px; padding:4px 10px; margin-left:auto; }
.editor-toolbar select, .editor-toolbar button { background:rgba(255,255,255,.06); border:1px solid var(--border); color:var(--text-dim); font-size:.6rem; padding:4px 8px; letter-spacing:.5px; cursor:pointer; border-radius:6px; }
.editor-toolbar button.on, .editor-toolbar button:hover, .editor-toolbar select:focus { background:linear-gradient(140deg,rgba(93,123,255,.35),rgba(56,232,210,.18)); color:var(--text); border-color:#3a4956; }
.editor-status { display:flex; align-items:center; gap:16px; font-size:.55rem; letter-spacing:.6px; padding:4px 10px; background:rgba(0,0,0,.3); border-top:1px solid var(--border); color:var(--text-dim); }
.run-output { border-top:1px solid var(--border); background:linear-gradient(180deg,rgba(0,0,0,.3),rgba(0,0,0,.15)); max-height:160px; display:flex; flex-direction:column; }
.run-output-title { font-size:.55rem; letter-spacing:.55px; padding:6px 10px; color:var(--text-dim); }
.run-output pre { margin:0; padding:8px 12px 12px; font-size:.65rem; line-height:1.35; font-family: var(--mono); overflow:auto; }
.snippet-pop { position:absolute; top:54px; left:8px; background:rgba(10,16,24,.92); border:1px solid var(--border); border-radius:10px; padding:6px; display:flex; flex-direction:column; gap:4px; width:200px; box-shadow: var(--shadow-sm); z-index:20; backdrop-filter: blur(12px); }
.snippet-item { font-size:.65rem; padding:6px 8px; border-radius:6px; cursor:pointer; background:rgba(255,255,255,.04); color:var(--text-dim); }
.snippet-item:hover { background:linear-gradient(130deg,rgba(93,123,255,.35),rgba(56,232,210,.15)); color:var(--text); }
/* Snapshots & Diff */
.snapshots-bar { display:flex; gap:6px; padding:4px 8px; background:rgba(0,0,0,.25); border-top:1px solid var(--border); flex-wrap:wrap; }
.snapshots-title { font-size:.55rem; letter-spacing:.5px; color:var(--text-dim); display:flex; align-items:center; }
.snap-btn { background:rgba(255,255,255,.06); border:1px solid var(--border); color:var(--text-dim); font-size:.55rem; padding:4px 6px; border-radius:4px; cursor:pointer; }
.snap-btn:hover { background:linear-gradient(120deg,rgba(93,123,255,.4),rgba(56,232,210,.15)); color:var(--text); }
.diff-modal { position:fixed; inset:0; background:rgba(0,0,0,.55); display:flex; align-items:flex-start; justify-content:center; padding:60px 20px 40px; z-index:300; }
.diff-card { width: min(900px,100%); background:var(--surface-1); border:1px solid var(--border); border-radius:16px; box-shadow: var(--shadow); display:flex; flex-direction:column; max-height:80vh; overflow:hidden; }
.diff-head { padding:10px 16px; font-size:.65rem; letter-spacing:.5px; display:flex; align-items:center; gap:6px; background:linear-gradient(140deg,rgba(255,255,255,.06),rgba(255,255,255,0)); position:relative; }
.diff-close { position:absolute; top:6px; right:8px; background:none; border:1px solid var(--border); width:24px; height:24px; border-radius:6px; color:var(--text-dim); cursor:pointer; }
.diff-close:hover { background:rgba(255,255,255,.08); color:var(--text); }
.diff-body { padding:0 0 8px; overflow:auto; font-family: var(--mono); font-size:.6rem; }
.diff-line { display:flex; align-items:stretch; gap:0; }
.diff-line .gutter { width:18px; text-align:center; background:rgba(255,255,255,.05); color:var(--text-dim); padding:2px 0; }
.diff-line pre { margin:0; padding:2px 6px; flex:1; white-space:pre-wrap; word-break:break-word; }
.diff-line.add pre { background:rgba(34,197,94,.12); }
.diff-line.del pre { background:rgba(239,68,68,.14); text-decoration:line-through; }
.diff-line.ctx pre { background:transparent; }
html.light .diff-card { background:#ffffff; }
html.light .diff-line .gutter { background:#f1f5f9; }
html.light .diff-line.add pre { background:#dcfce7; }
html.light .diff-line.del pre { background:#fee2e2; }
/* Command Palette */
.command-palette { position:fixed; inset:0; background:rgba(0,0,0,.45); display:flex; align-items:flex-start; justify-content:center; padding:100px 20px 40px; z-index:400; backdrop-filter: blur(4px); }
.command-panel { width:min(640px,100%); background:var(--surface-1); border:1px solid var(--border); border-radius:18px; box-shadow: var(--shadow); display:flex; flex-direction:column; overflow:hidden; }
.command-input { padding:14px 18px; border:none; background:linear-gradient(90deg,rgba(255,255,255,.06),rgba(255,255,255,0)); color:var(--text); font-size:.85rem; outline:none; font-family:var(--font-stack); }
.command-list { max-height:380px; overflow:auto; display:flex; flex-direction:column; }
.command-item { display:flex; justify-content:space-between; padding:10px 16px; font-size:.7rem; letter-spacing:.4px; cursor:pointer; color:var(--text-dim); border-bottom:1px solid rgba(255,255,255,.05); }
.command-item:hover { background:linear-gradient(120deg,rgba(93,123,255,.35),rgba(56,232,210,.18)); color:var(--text); }
.cmd-group { opacity:.6; font-size:.55rem; }
.command-empty { padding:20px; font-size:.65rem; color:var(--text-dim); text-align:center; }
.command-hint { font-size:.55rem; padding:8px 14px; color:var(--text-dim); border-top:1px solid var(--border); text-align:right; }
html.light .command-panel { background:#ffffff; }
html.light .command-item { border-bottom:1px solid #e2e8f0; }
html.light .command-item:hover { background:linear-gradient(120deg,#dbeafe,#e0e7ff); }
html.light .editor-tab { background:#f1f5f9; }
html.light .editor-tab.active { background:linear-gradient(130deg,#dbeafe,#ede9fe); }
html.light .editor-toolbar select, html.light .editor-toolbar button { background:#eef2f7; border-color:#d8e0ea; }
html.light .editor-toolbar button.on, html.light .editor-toolbar button:hover { background:linear-gradient(120deg,#c7d2fe,#e0e7ff); color:#1e293b; }
html.light .run-output { background:#f1f5f9; }
html.light .run-output pre { background:#ffffff; }
html.light .snippet-pop { background:#ffffff; }
html.light .snippet-item { background:#f1f5f9; }
html.light .snippet-item:hover { background:linear-gradient(130deg,#dbeafe,#ede9fe); }
.card h3, .card h2 { margin:0 0 12px; font-weight:600; letter-spacing:.5px; }
.card p { margin:0 0 10px; line-height:1.55; font-size:.9rem; color:var(--text-dim); }

/* Technique list */
.tech-pane { width:300px; display:flex; flex-direction:column; gap:12px; }
.section-label { font-size:.58rem; letter-spacing:2.4px; font-weight:700; color:var(--text-dim); padding:6px 4px 4px; text-transform:uppercase; font-family: var(--mono); opacity:.9; position:relative; margin:10px 0 4px; display:block; }
.section-label::after { content:""; position:absolute; left:0; right:0; bottom:0; height:1px; background:linear-gradient(90deg,rgba(255,255,255,.08),rgba(255,255,255,0.04) 45%,rgba(255,255,255,0)); opacity:.6; pointer-events:none; }
html.light .section-label::after { background:linear-gradient(90deg,rgba(0,0,0,.12),rgba(0,0,0,0.06) 45%,rgba(0,0,0,0)); opacity:.5; }
.tech-list { display:flex; flex-direction:column; gap:6px; }
.tech-item { padding:10px 14px; border:1px solid var(--border); border-radius: var(--radius-sm); font-size:.75rem; letter-spacing:.4px; background:linear-gradient(140deg,#172128,#121a21); cursor:pointer; transition: var(--trans-fast); position:relative; overflow:hidden; }
.tech-item::after { content:""; position:absolute; inset:0; background:linear-gradient(110deg,rgba(255,255,255,.15),rgba(255,255,255,0) 55%); opacity:0; transition: var(--trans-fast); mix-blend-mode:overlay; }
.tech-item:hover { background:linear-gradient(150deg,#1f2d37,#141c22); border-color:#3a4956; }
.tech-item:hover::after { opacity:.4; }
.tech-item:active { transform:translateY(1px); }
.tech-item.selected { background:linear-gradient(160deg,#243544,#19242c); border-color:#4b6070; box-shadow: inset 0 0 0 1px #4b6070; }

pre { font-family: var(--mono); background:#101823; padding:14px 16px; border-radius: var(--radius-sm); font-size:.72rem; line-height:1.45; overflow:auto; border:1px solid #263240; }
pre::-webkit-scrollbar { height:8px; }
pre::-webkit-scrollbar-thumb { background:#25313f; border-radius:4px; }

/* Forms */
input, textarea { background:#141d28; border:1px solid var(--border); color:var(--text); border-radius: var(--radius-sm); padding:10px 12px; font-family:inherit; font-size:.82rem; transition: var(--trans-fast); resize:vertical; }
input:focus, textarea:focus { outline:1px solid var(--focus); box-shadow:0 0 0 3px rgba(59,130,246,.25); }
input:focus-visible, textarea:focus-visible { outline:1px solid var(--focus); box-shadow: var(--focus-ring); }

button { font-family:inherit; }
.btn { --btn-bg:#1b252d; --btn-border:#2e3b46; --btn-fg:var(--text); background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,0)) , var(--btn-bg); color:var(--btn-fg); border:1px solid var(--btn-border); padding:10px 18px; font-size:.75rem; font-weight:500; letter-spacing:.6px; border-radius: var(--radius-sm); cursor:pointer; display:inline-flex; align-items:center; gap:8px; position:relative; transition: var(--trans-fast), box-shadow .25s; overflow:hidden; }
.btn::before { content:""; position:absolute; inset:0; background:linear-gradient(120deg,rgba(255,255,255,.12),rgba(255,255,255,0) 55%); opacity:0; mix-blend-mode:overlay; transition: var(--trans-fast); }
.btn:hover { background:linear-gradient(180deg,rgba(255,255,255,.14),rgba(255,255,255,0)) , #22303a; box-shadow:0 6px 18px -8px rgba(0,0,0,.7),0 0 0 1px rgba(255,255,255,.05); }
.btn:hover::before { opacity:.9; }
.btn:active { transform:translateY(1px); }
.btn:focus-visible { outline:1px solid var(--focus); box-shadow:0 0 0 3px rgba(59,130,246,.25); }
.btn:focus-visible { box-shadow: var(--focus-ring); }

/* Improved keyboard focus for nav */
.nav-button:focus-visible { outline:1px solid var(--focus); box-shadow: var(--focus-ring); }

/* Reduced motion: disable glow/blur heavy transitions */
@media (prefers-reduced-motion: reduce){
  .fade-in { animation:none; }
  .nav-button::before { display:none; }
  body, .card, .sidebar, .nav-button, .tile, .terminal, pre, .tech-item { transition:none !important; }
}
.btn.accent { background:linear-gradient(130deg,#4e90ff,#7b6dff,#ff4fa0); border:1px solid #44648f; }
.btn.accent:hover { filter:brightness(1.1); box-shadow:0 0 0 1px #4e90ff55, 0 6px 22px -6px rgba(78,144,255,.5); }
.btn.danger { background:#3a1616; border-color:#552222; color:#fca5a5; }
.btn.danger:hover { background:#4b1d1d; }

.inline-badge { background:#1f2834; padding:2px 8px; border-radius:20px; font-size:.6rem; letter-spacing:.5px; color:var(--text-dim); }

/* Terminal */
.terminal-wrap { display:flex; flex-direction:column; gap:12px; }
.terminal { background:linear-gradient(180deg,#06090c,#040608); border:1px solid #222d36; border-radius: var(--radius); padding:14px 16px; font-family: var(--mono); font-size:.72rem; height:420px; overflow:auto; line-height:1.4; box-shadow: inset 0 0 0 1px #111820,0 0 0 1px rgba(255,255,255,.04); }
.terminal { position:relative; cursor:text; white-space:pre-wrap; }
.terminal:focus { outline:1px solid var(--accent); box-shadow:0 0 0 2px rgba(59,130,246,.25); }
.cursor { display:inline-block; width:7px; background:var(--text); height:1em; vertical-align:bottom; animation: blink 1s steps(1) infinite; }
@keyframes blink { 50% { opacity:0; } }
.terminal-input-row { display:flex; gap:10px; }
/* Dashboard */
.dashboard-grid { display:flex; flex-direction:column; gap:28px; }
.tiles { display:flex; gap:14px; flex-wrap:wrap; }
.tile { flex:0 0 140px; background:linear-gradient(160deg,#18222a,#131a20); border:1px solid #27343e; padding:12px 14px; border-radius:14px; box-shadow:inset 0 0 0 1px #1f2a36, 0 4px 10px -4px rgba(0,0,0,.6); display:flex; flex-direction:column; gap:4px; position:relative; overflow:hidden; }
.tile::after { content:""; position:absolute; inset:0; background:linear-gradient(100deg,rgba(255,255,255,.15),rgba(255,255,255,0) 55%); opacity:0; transition: var(--trans-fast); }
.tile:hover::after { opacity:.5; }
.tile-value { font-size:1.2rem; font-weight:600; background:var(--gradient-accent); -webkit-background-clip:text; background-clip:text; color:transparent; }
.tile-label { font-size:.6rem; letter-spacing:.6px; color:var(--text-dim); text-transform:uppercase; }
.charts-row { display:flex; gap:24px; }
.bar-series { display:flex; align-items:flex-end; gap:6px; height:140px; padding:4px 2px 0; }
.bar-wrap { flex:1; display:flex; flex-direction:column; align-items:center; gap:4px; }
.bar { width:100%; background:linear-gradient(180deg,#2563eb,#7c3aed); border-radius:4px 4px 2px 2px; box-shadow:0 0 0 1px rgba(255,255,255,.1),0 4px 10px -2px rgba(0,0,0,.7); transition:height .3s; }
.bar-label { font-size:.5rem; color:#64748b; }
.donut-box { display:flex; gap:14px; }
.donut { width:130px; height:130px; transform:rotate(-90deg); }
.donut-seg { stroke-linecap:butt; }
.donut-legend { display:flex; flex-direction:column; gap:6px; font-size:.55rem; }
.legend-row { display:flex; align-items:center; gap:6px; }
.legend-row span { width:10px; height:10px; border-radius:3px; display:inline-block; }
.legend-row em { font-style:normal; color:var(--text-dim); margin-left:auto; }

/* Admin */
.admin-grid { display:flex; flex-direction:column; gap:28px; }
.kv { display:grid; grid-template-columns: repeat(auto-fill, minmax(140px,1fr)); gap:12px; margin-top:6px; }
.kv > div { background:linear-gradient(150deg,#1a242c,#121a21); border:1px solid #2a3741; padding:10px 12px; border-radius:12px; display:flex; flex-direction:column; gap:4px; position:relative; overflow:hidden; }
.kv > div::after { content:""; position:absolute; inset:0; background:linear-gradient(120deg,rgba(255,255,255,.18),rgba(255,255,255,0) 60%); opacity:0; transition: var(--trans-fast); mix-blend-mode:overlay; }
.kv > div:hover::after { opacity:.55; }
.kv label { font-size:.55rem; letter-spacing:.5px; color:var(--text-dim); }
.kv span { font-size:.8rem; font-weight:500; }
/* ANSI color mapping (basic) */
.ansi { font-weight:400; }
.ansi.b { font-weight:600; }
.ansi.f30 { color:#778899; }
.ansi.f31 { color:#f87171; }
.ansi.f32 { color:#4ade80; }
.ansi.f33 { color:#facc15; }
.ansi.f34 { color:#60a5fa; }
.ansi.f35 { color:#c084fc; }
.ansi.f36 { color:#5eead4; }
.ansi.f37 { color:#f1f5f9; }
.ansi.bg40 { background:#1e293b; }
.ansi.bg41 { background:#3f1d23; }
.ansi.bg42 { background:#123524; }
.ansi.bg43 { background:#3a300e; }
.ansi.bg44 { background:#102d4b; }
.ansi.bg45 { background:#321d4b; }
.ansi.bg46 { background:#0d3f48; }
.ansi.bg47 { background:#334155; }

/* Tables */
.table-scroll { overflow:auto; max-width:100%; }
table { width:100%; border-collapse:collapse; font-size:.72rem; }
th { text-align:left; font-weight:600; padding:8px 10px; color:var(--text-dim); letter-spacing:.5px; position:sticky; top:0; background:#141d28; }
td { padding:8px 10px; border-top:1px solid #1f2935; vertical-align:top; }
tr:hover td { background:#162230; }

/* Auth card */
.auth-card { max-width:380px; margin:60px auto; }

/* New Auth Experience */
.auth-shell { display:flex; flex-wrap:wrap; gap:60px; align-items:stretch; justify-content:center; padding:40px 10px 80px; width:100%; }
.auth-hero { flex:1 1 380px; max-width:520px; display:flex; flex-direction:column; gap:18px; padding:10px 10px 20px; }
.auth-hero h1 { margin:0; font-size:2rem; background:var(--gradient-accent); -webkit-background-clip:text; background-clip:text; color:transparent; letter-spacing:.5px; font-weight:600; }
.logo-orb { width:70px; height:70px; border-radius:24px; background:var(--gradient-accent); display:flex; align-items:center; justify-content:center; font-weight:600; font-size:1.1rem; box-shadow:0 8px 32px -8px rgba(0,0,0,.6); }
.tagline { margin:0; font-size:.9rem; color:var(--text-dim); letter-spacing:.5px; }
.feature-bullets { list-style:none; margin:4px 0 0; padding:0; display:flex; flex-direction:column; gap:8px; font-size:.7rem; color:var(--text-dim); letter-spacing:.6px; }
.feature-bullets li { position:relative; padding-left:14px; }
.feature-bullets li::before { content:''; width:6px; height:6px; background:var(--accent); position:absolute; left:0; top:6px; border-radius:50%; box-shadow:0 0 0 4px rgba(59,130,246,.15); }
.auth-panel { width:360px; background:var(--bg-elevated); border:1px solid var(--border); border-radius:24px; padding:34px 34px 40px; display:flex; flex-direction:column; gap:18px; box-shadow: var(--shadow); position:relative; overflow:hidden; }
.auth-panel::before { content:''; position:absolute; inset:0; background:radial-gradient(circle at 20% 15%, rgba(255,255,255,.08), transparent 60%); pointer-events:none; }
.auth-panel h2 { margin:0; font-size:1.1rem; letter-spacing:.5px; }
.auth-panel .muted { margin:0; font-size:.65rem; color:var(--text-dim); letter-spacing:.5px; }
.form-group { display:flex; flex-direction:column; gap:6px; }
.form-group label { font-size:.55rem; letter-spacing:.5px; font-weight:600; color:var(--text-dim); }
.btn.full { width:100%; justify-content:center; }
.form-error { color:var(--danger); font-size:.65rem; letter-spacing:.4px; }
.legal { font-size:.55rem; letter-spacing:.4px; color:var(--text-dim); margin-top:4px; }
html.light .auth-panel { background:#ffffff; }

/* Dashboard Revamp */
.dashboard-shell { display:flex; flex-direction:column; gap:34px; }
.hero { display:flex; gap:40px; flex-wrap:wrap; }
.hero-left { flex:1 1 420px; display:flex; flex-direction:column; gap:12px; }
.hero-title { margin:0; font-size:1.9rem; font-weight:600; letter-spacing:.5px; background:linear-gradient(90deg,#ffffff,#94a3b8); -webkit-background-clip:text; background-clip:text; color:transparent; }
html.light .hero-title { background:linear-gradient(90deg,#1e293b,#334155); -webkit-background-clip:text; background-clip:text; color:transparent; }
.hero-sub { margin:0; font-size:.85rem; color:var(--text-dim); }
.hero-meta-row { display:flex; gap:14px; flex-wrap:wrap; }
.mini-stat { background:var(--bg-alt); border:1px solid var(--border); padding:10px 14px; border-radius:14px; display:flex; flex-direction:column; gap:4px; min-width:120px; }
.mini-stat span { font-size:.9rem; font-weight:600; }
.mini-stat label { font-size:.55rem; letter-spacing:.5px; color:var(--text-dim); text-transform:uppercase; }
.console-teaser { flex:1 1 340px; background:var(--bg-alt); border:1px solid var(--border); border-radius:20px; padding:18px 20px 50px; position:relative; display:flex; flex-direction:column; gap:10px; box-shadow: var(--shadow-sm); }
.teaser-head { font-size:.6rem; letter-spacing:.5px; color:var(--text-dim); font-weight:600; }
.teaser-pre { margin:0; flex:1; background:#050709; border:1px solid #1f2935; border-radius:12px; padding:10px 12px; font-family:var(--mono); font-size:.62rem; line-height:1.35; overflow:auto; }
html.light .teaser-pre { background:#f1f5f9; border-color:#d8e0ea; }
.console-teaser .btn.small.overlay { position:absolute; right:16px; bottom:14px; padding:8px 14px; font-size:.6rem; }
.quick-actions-card { border-radius:24px; padding:26px 28px; }
.quick-actions-card h3 { margin:0 0 18px; }
.quick-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(160px,1fr)); gap:16px; }
.quick-tile { position:relative; border:1px solid var(--border); background:var(--bg-alt); padding:14px 14px 46px; text-align:left; border-radius:16px; cursor:pointer; overflow:hidden; display:flex; flex-direction:column; gap:8px; transition: var(--trans-fast); }
.quick-tile::before { content:''; position:absolute; inset:0; background:linear-gradient(135deg,rgba(255,255,255,.05),transparent 60%); opacity:0; transition: var(--trans-fast); }
.quick-tile:hover { background:#1b2735; box-shadow:0 4px 14px -4px rgba(0,0,0,.6), 0 0 0 1px #2a394a; }
.quick-tile:hover::before { opacity:1; }
html.light .quick-tile { background:#ffffff; }
html.light .quick-tile:hover { background:#f1f5f9; }
.q-label { font-size:.75rem; font-weight:600; letter-spacing:.5px; }
.q-desc { font-size:.6rem; color:var(--text-dim); line-height:1.35; }
.lower-grid { display:grid; grid-template-columns: minmax(300px,1fr) minmax(260px,340px); gap:32px; align-items:start; }
@media (max-width:1040px){ .lower-grid { grid-template-columns:1fr; } }
.panel.activity { min-height:260px; }
.activity-list { list-style:none; margin:12px 0 0; padding:0; display:flex; flex-direction:column; gap:6px; font-size:.6rem; }
.activity-list li { display:grid; grid-template-columns: 74px 80px 90px 1fr; gap:10px; align-items:start; padding:6px 10px; border:1px solid var(--border); background:var(--bg-alt); border-radius:10px; }
.activity-list li .time { color:var(--text-dim); }
.activity-list li .type { font-weight:600; }
.activity-list li .who { color:var(--accent); }
.activity-list li .meta { font-size:.55rem; color:var(--text-dim); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.panel.stats { min-height:260px; }
.status-tiles { display:grid; grid-template-columns: repeat(auto-fill, minmax(110px,1fr)); gap:12px; margin-top:8px; }
.stat { background:var(--bg-alt); border:1px solid var(--border); border-radius:12px; padding:10px 12px; display:flex; flex-direction:column; gap:4px; }
.stat-val { font-size:.85rem; font-weight:600; }
.stat-label { font-size:.5rem; letter-spacing:.5px; color:var(--text-dim); text-transform:uppercase; }
.empty-note { font-size:.6rem; color:var(--text-dim); margin-top:4px; }
.skeleton-line { height:10px; background:linear-gradient(90deg,#1e2734,#253344,#1e2734); background-size:200% 100%; animation: ske 1.4s linear infinite; border-radius:6px; }
@keyframes ske { 0% { background-position:0 0; } 100% { background-position:-200% 0; } }

/* Glass card variant */
.card-glass, .card-glass.quick-actions-card { background:rgba(255,255,255,0.04); backdrop-filter: blur(18px); border:1px solid rgba(255,255,255,0.07); }
html.light .card-glass { background:rgba(255,255,255,0.7); }


/* Animations */
.fade-in { animation: fade .5s cubic-bezier(.4,.0,.2,1); }
@keyframes fade { 0% { opacity:0; transform:translateY(10px) scale(.98); filter:blur(2px);} 100% { opacity:1; transform:translateY(0) scale(1); filter:blur(0);} }

/* Scale pop for key panels */
.pop-in { animation: pop .4s cubic-bezier(.4,.0,.2,1); }
@keyframes pop { 0% { opacity:0; transform:scale(.96) translateY(6px); } 100% { opacity:1; transform:scale(1) translateY(0); } }

/* Toast notifications */
.toasts { position:fixed; top:16px; right:16px; display:flex; flex-direction:column; gap:10px; z-index:999; width:300px; }
.toast { background: var(--bg-elevated); border:1px solid var(--border); padding:12px 14px; border-radius:10px; font-size:.7rem; letter-spacing:.3px; box-shadow: var(--shadow); display:flex; gap:10px; align-items:flex-start; animation: slideIn .45s cubic-bezier(.4,.0,.2,1); position:relative; overflow:hidden; }
.toast::before { content:''; position:absolute; inset:0; background:linear-gradient(120deg,rgba(255,255,255,.06),transparent 40%); pointer-events:none; }
.toast-info { border-color:#2563eb55; }
.toast-success { border-color:#16a34a55; }
.toast-error { border-color:#dc262655; }
.toast-success .toast-icon { color:var(--ok); }
.toast-error .toast-icon { color:var(--danger); }
.toast-info .toast-icon { color:var(--accent); }
.toast-close { background:transparent; border:0; color:var(--text-dim); cursor:pointer; font-size:.7rem; padding:2px 4px; }
@keyframes slideIn { 0% { opacity:0; transform:translateX(40px) translateY(-10px) scale(.96); } 100% { opacity:1; transform:translateX(0) translateY(0) scale(1); } }
@media (prefers-reduced-motion: reduce){ .toast, .pop-in { animation:none; } }

/* Light theme toast refinements */
html.light .toast { background:#ffffff; }
html.light .toast-info { border-color:#2563eb33; }
html.light .toast-success { border-color:#16a34a33; }
html.light .toast-error { border-color:#dc262633; }

/* Animated list items */
.tech-item { animation: itemFade .35s ease; }
@keyframes itemFade { from { opacity:0; transform:translateY(4px); } to { opacity:1; transform:translateY(0); } }

/* Badge color variants */
.badge-breached { background:rgba(220,38,38,.18); color:#f87171; }
html.light .badge-breached { background:rgba(220,38,38,.12); color:#b91c1c; }
.badge-clear { background:rgba(16,185,129,.15); color:var(--ok); }
html.light .badge-clear { background:rgba(16,185,129,.12); }
.badge-error { background:rgba(220,38,38,.2); color:#fca5a5; }
html.light .badge-error { background:rgba(220,38,38,.15); color:#b91c1c; }

/* Responsive */
@media (max-width: 1040px) {
  .split { flex-direction:column; }
  .tech-pane { width:100%; }
  .sidebar { width:220px; }
}
@media (max-width: 760px) {
  #root { flex-direction:column; }
  .sidebar { width:100%; flex-direction:row; overflow-x:auto; }
  .nav { display:flex; flex-direction:row; }
  .nav-button { flex:1; justify-content:center; font-size:.7rem; }
  .content { flex:1; }
  main { padding:20px 22px 60px; }
}
